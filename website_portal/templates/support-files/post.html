<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-group">
        <label for="visibility">Select Visibility</label>
        <select class="form-control" id="visibility" name="visibility" required>
            <option value="public">Public</option>
            <option value="private">Private (Students Only)</option>
        </select>
    </div>

    <div class="form-group" id="additional-info" style="display: none;">
        <label for="additional">Additional Information</label>
        <textarea class="form-control" id="additional" name="additional" rows="4" placeholder="Enter additional information..."></textarea>
    </div>

    <div class="form-group">
        <label for="teacher">Teacher</label>
        <input type="text" class="form-control" id="teacher" name="teacher" value="{{ user.first_name|capfirst }} {{ user.last_name|capfirst }}" readonly>
    </div>

    <div class="form-group">
        <label for="post">Post</label>
        <textarea class="form-control" id="post" name="post" rows="4" placeholder="Enter your post here..." required></textarea>
    </div>

    <!-- <div class="form-group">
        <label for="comment">Comment</label>
        <textarea class="form-control" id="comment" name="comment" rows="4" placeholder="Enter your comment here..."></textarea>
    </div> -->
<hr>
    <div class="form-group">
        <label for="image">Image</label>
        <input type="file" class="form-control-file" id="image" name="image" accept="image/*" onchange="previewImage(event)">
        <div class="preview" id="image-preview"></div>
    </div>

    <div class="form-group">
        <label for="attachment">Attachment</label>
        <input type="file" class="form-control-file" id="attachment" name="attachment" onchange="previewAttachment(event)">
        <div class="preview" id="attachment-preview"></div>
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
</form>

<script>
    function previewImage(event) {
        const previewContainer = document.getElementById('image-preview');
        previewContainer.innerHTML = ''; // Clear previous previews
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = document.createElement('img');
                img.src = e.target.result;
                img.style.maxWidth = '100%';
                previewContainer.appendChild(img);
            };
            reader.readAsDataURL(file);
        }
    }
    
    function previewAttachment(event) {
        const previewContainer = document.getElementById('attachment-preview');
        previewContainer.innerHTML = ''; // Clear previous previews
        const file = event.target.files[0];
        if (file) {
            const fileInfo = document.createElement('p');
            fileInfo.textContent = `Attachment: ${file.name}`;
            previewContainer.appendChild(fileInfo);
        }
    }
</script>